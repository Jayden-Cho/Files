{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "이번에는 승차승객수/하차승객수의 비율로 인사이트를 얻어보자."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>승차승객수</th>\n",
       "      <th>하차승객수</th>\n",
       "      <th>승차/하차</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>버스정류장명</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>KT월곡지사</td>\n",
       "      <td>20086</td>\n",
       "      <td>20073</td>\n",
       "      <td>1.000648</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>금촌농협</td>\n",
       "      <td>131</td>\n",
       "      <td>131</td>\n",
       "      <td>1.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>둔촌동역4번출구</td>\n",
       "      <td>36773</td>\n",
       "      <td>36798</td>\n",
       "      <td>0.999321</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>마곡엠밸리1단지</td>\n",
       "      <td>305</td>\n",
       "      <td>305</td>\n",
       "      <td>1.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>상도터널노량진동</td>\n",
       "      <td>31737</td>\n",
       "      <td>31767</td>\n",
       "      <td>0.999056</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>서부병원</td>\n",
       "      <td>84944</td>\n",
       "      <td>84970</td>\n",
       "      <td>0.999694</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>서울교대정문앞</td>\n",
       "      <td>17067</td>\n",
       "      <td>17059</td>\n",
       "      <td>1.000469</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>용산등기소</td>\n",
       "      <td>12149</td>\n",
       "      <td>12139</td>\n",
       "      <td>1.000824</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>제일병원</td>\n",
       "      <td>2725</td>\n",
       "      <td>2727</td>\n",
       "      <td>0.999267</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "          승차승객수  하차승객수     승차/하차\n",
       "버스정류장명                          \n",
       "KT월곡지사    20086  20073  1.000648\n",
       "금촌농협        131    131  1.000000\n",
       "둔촌동역4번출구  36773  36798  0.999321\n",
       "마곡엠밸리1단지    305    305  1.000000\n",
       "상도터널노량진동  31737  31767  0.999056\n",
       "서부병원      84944  84970  0.999694\n",
       "서울교대정문앞   17067  17059  1.000469\n",
       "용산등기소     12149  12139  1.000824\n",
       "제일병원       2725   2727  0.999267"
      ]
     },
     "execution_count": 42,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import pandas as pd\n",
    "\n",
    "df = pd.read_csv('bususe.csv', thousands=\",\")\n",
    "del df['사용월'], df['노선ID'], df['버스정류장ID']\n",
    "df = df.groupby('버스정류장명').sum()\n",
    "df = df[df.하차승객수 != 0]\n",
    "df = df[df.승차승객수 >= 100]\n",
    "df = df[df.하차승객수 >= 50]\n",
    "df['승차/하차'] = df['승차승객수']/df['하차승객수']\n",
    "df = df[df['승차/하차']<1.001]\n",
    "df = df[df['승차/하차']>0.999]\n",
    "df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>승차승객수</th>\n",
       "      <th>하차승객수</th>\n",
       "      <th>승차/하차</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>버스정류장명</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <td>남산서울타워(가상)</td>\n",
       "      <td>155</td>\n",
       "      <td>37304</td>\n",
       "      <td>0.004155</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>의료원입구사거리</td>\n",
       "      <td>145</td>\n",
       "      <td>30465</td>\n",
       "      <td>0.004760</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>중계주공7단지</td>\n",
       "      <td>104</td>\n",
       "      <td>20442</td>\n",
       "      <td>0.005088</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>답십리역.경우회매장입구</td>\n",
       "      <td>114</td>\n",
       "      <td>18391</td>\n",
       "      <td>0.006199</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>홍은유원아파트</td>\n",
       "      <td>155</td>\n",
       "      <td>16589</td>\n",
       "      <td>0.009344</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>풍림아파트삼거리</td>\n",
       "      <td>128</td>\n",
       "      <td>10906</td>\n",
       "      <td>0.011737</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>종합운동장정문</td>\n",
       "      <td>171</td>\n",
       "      <td>14100</td>\n",
       "      <td>0.012128</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>삼익아파트.한보아파트</td>\n",
       "      <td>105</td>\n",
       "      <td>8380</td>\n",
       "      <td>0.012530</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>삼선교.한성대입구역</td>\n",
       "      <td>560</td>\n",
       "      <td>44003</td>\n",
       "      <td>0.012726</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>대우APT정문.대림APT후문앞</td>\n",
       "      <td>347</td>\n",
       "      <td>26817</td>\n",
       "      <td>0.012940</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>대교방송</td>\n",
       "      <td>157</td>\n",
       "      <td>11796</td>\n",
       "      <td>0.013310</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>대우당약국</td>\n",
       "      <td>150</td>\n",
       "      <td>10953</td>\n",
       "      <td>0.013695</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>정릉대우아파트</td>\n",
       "      <td>774</td>\n",
       "      <td>55483</td>\n",
       "      <td>0.013950</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>신동아아파트16동</td>\n",
       "      <td>118</td>\n",
       "      <td>7857</td>\n",
       "      <td>0.015018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>구민체육센터후문</td>\n",
       "      <td>103</td>\n",
       "      <td>6670</td>\n",
       "      <td>0.015442</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>대림벽산아파트</td>\n",
       "      <td>367</td>\n",
       "      <td>18913</td>\n",
       "      <td>0.019405</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>미사강변센트럴자이.20단지.하남고등학교</td>\n",
       "      <td>564</td>\n",
       "      <td>28300</td>\n",
       "      <td>0.019929</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>하늘초등학교</td>\n",
       "      <td>487</td>\n",
       "      <td>24398</td>\n",
       "      <td>0.019961</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>힐스테이트2단지후문앞</td>\n",
       "      <td>386</td>\n",
       "      <td>19136</td>\n",
       "      <td>0.020171</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <td>미양중고등학교</td>\n",
       "      <td>151</td>\n",
       "      <td>7390</td>\n",
       "      <td>0.020433</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                       승차승객수  하차승객수     승차/하차\n",
       "버스정류장명                                       \n",
       "남산서울타워(가상)               155  37304  0.004155\n",
       "의료원입구사거리                 145  30465  0.004760\n",
       "중계주공7단지                  104  20442  0.005088\n",
       "답십리역.경우회매장입구             114  18391  0.006199\n",
       "홍은유원아파트                  155  16589  0.009344\n",
       "풍림아파트삼거리                 128  10906  0.011737\n",
       "종합운동장정문                  171  14100  0.012128\n",
       "삼익아파트.한보아파트              105   8380  0.012530\n",
       "삼선교.한성대입구역               560  44003  0.012726\n",
       "대우APT정문.대림APT후문앞         347  26817  0.012940\n",
       "대교방송                     157  11796  0.013310\n",
       "대우당약국                    150  10953  0.013695\n",
       "정릉대우아파트                  774  55483  0.013950\n",
       "신동아아파트16동                118   7857  0.015018\n",
       "구민체육센터후문                 103   6670  0.015442\n",
       "대림벽산아파트                  367  18913  0.019405\n",
       "미사강변센트럴자이.20단지.하남고등학교    564  28300  0.019929\n",
       "하늘초등학교                   487  24398  0.019961\n",
       "힐스테이트2단지후문앞              386  19136  0.020171\n",
       "미양중고등학교                  151   7390  0.020433"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df.sort_values('승차/하차').iloc[:20,]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
